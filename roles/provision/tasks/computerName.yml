---

# ------------------------------------------------------------
# Review or change current computer name
# ------------------------------------------------------------

 - debug:
     msg: "** Review or change current computer name **"
     verbosity: 2

 - name: "Computer Name: identify current name"
   command: "/usr/sbin/scutil --get ComputerName"
   register: dComputerNameCurrent

 - name: "Computer Name: change computer name & hostname"
   command: "{{Â item }}"
   with_items:
    - "/usr/sbin/scutil --set ComputerName {{ dComputerName | default('{{ dComputerNameCurrent }}')}}"
    - "/usr/sbin/scutil --set HostName {{ dComputerName | default('{{ dComputerNameCurrent }}')}}"
    - "/usr/sbin/scutil --set LocalHostName {{ dComputerName  | default('{{ dComputerNameCurrent }}')}}"
    - "defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string {{ dComputerName  | default('{{ dComputerNameCurrent }}')}}"
   become: true

 - name: add {{ host }} to /etc/hosts
   lineinfile:
     dest: "/etc/hosts"
     regexp: '.*{{ dHost }}$'
     line: "{{ ip }} {{ dHost | default(bingo)}}$}"
     state: present
   become: yes
   when: IP is defined
